<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Lettering | The Loveprinting Machine Type Foundry</title>
    <meta name="description" content="Custom lettering and calligraphy projects. Hand-crafted typography for unique design solutions.">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="../assets/fonts/retry-sans-mono-regular.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- CSS Modules -->
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/typography.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/responsive.css">
    
    <!-- Additional styles for lettering page -->
    <style>
        /* Simple button filters (адаптация под существующий FiltersManager) */
        .simple-filters {
            padding: var(--spacing-3xl) 0;
            background: var(--color-white);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .simple-filters__buttons {
            display: flex;
            justify-content: center;
            gap: var(--spacing-md);
            flex-wrap: wrap;
        }

        .simple-filter-btn {
            padding: var(--spacing-sm) var(--spacing-lg);
            background: transparent;
            border: 1px solid var(--color-gray-300);
            color: var(--color-gray-600);
            text-transform: uppercase;
            font-size: var(--size-sm);
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all var(--transition-fast);
            font-family: inherit;
            border-radius: 0;
            white-space: nowrap;
        }

        .simple-filter-btn:hover,
        .simple-filter-btn.active {
            background: var(--color-black);
            color: var(--color-white);
            border-color: var(--color-black);
        }

        /* Lettering grid */
        .lettering-grid-section {
            padding: var(--spacing-5xl) 0;
            background: var(--color-white);
        }

        .lettering-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: var(--spacing-2xl);
        }

        .lettering-card {
            background: var(--color-white);
            transition: transform var(--transition-fast);
            cursor: pointer;
        }

        .lettering-card:hover {
            transform: translateY(-4px);
        }

        .lettering-card__image {
            width: 100%;
            height: 300px;
            background: var(--color-gray-200);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-gray-500);
            font-size: var(--size-base);
            margin-bottom: var(--spacing-lg);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .lettering-card__info {
            padding: 0 var(--spacing-sm);
        }

        .lettering-card__type {
            font-size: var(--size-sm);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-gray-600);
            margin-bottom: var(--spacing-sm);
        }

        .lettering-card__title {
            font-size: var(--size-lg);
            margin-bottom: var(--spacing-sm);
            font-weight: 400;
            color: var(--color-black);
        }

        .lettering-card__link {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: var(--size-sm);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-gray-600);
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: all var(--transition-fast);
        }

        .lettering-card__link:hover {
            color: var(--color-black);
            border-bottom-color: var(--color-black);
        }

        /* Results container */
        .lettering-results {
            min-height: 400px;
        }

        /* No results state */
        .no-results {
            text-align: center;
            padding: var(--spacing-5xl) 0;
            color: var(--color-gray-600);
        }

        .no-results__message {
            font-size: var(--size-lg);
            margin-bottom: var(--spacing-sm);
            color: var(--color-black);
        }

        .no-results__clear {
            background: var(--color-black);
            color: var(--color-white);
            border: none;
            padding: var(--spacing-sm) var(--spacing-lg);
            text-transform: uppercase;
            font-size: var(--size-sm);
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .no-results__clear:hover {
            background: var(--color-gray-800);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .simple-filters__buttons {
                justify-content: flex-start;
                overflow-x: auto;
                gap: var(--spacing-sm);
                padding-bottom: var(--spacing-sm);
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            .simple-filters__buttons::-webkit-scrollbar {
                display: none;
            }

            .simple-filter-btn {
                flex-shrink: 0;
            }

            .lettering-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
            }

            .lettering-card__image {
                height: 240px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header__logo">
                <a href="../index.html">
                    <img src="../assets/images/logo.png" alt="The Loveprinting Machine" width="40" height="40">
                </a>
            </div>
            <nav class="nav">
                <ul class="nav__list">
                    <li class="nav__item">
                        <a href="../index.html#fonts" class="nav__link">All fonts</a>
                    </li>
                    <li class="nav__item">
                        <a href="fonts-in-use.html" class="nav__link">Fonts in use</a>
                    </li>
                    <li class="nav__item">
                        <a href="lettering.html" class="nav__link nav__link--active">Custom lettering</a>
                    </li>
                    <li class="nav__item">
                        <a href="about.html" class="nav__link">About</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Lettering Hero Section (переиспользованный компонент с главной) -->
        <section class="lettering">
            <div class="container">
                <div class="lettering__animation">
                    <img src="../assets/animations/gif/custom-lettering.gif" alt="Custom lettering animation" class="lettering__gif">
                </div>
                <div class="lettering__content">
                    <div class="lettering__text">
                        <p>I've been creating lettering and calligraphy since 2017 — hoping that this is me chosen this field but also experimenting with animated lettering frame by frame. But I'm also experimenting with animated lettering printed of created by other.</p>
                    </div>
                    <!-- Ссылка убрана, так как мы уже на целевой странице -->
                </div>
            </div>
        </section>

        <!-- Simple Filters Section -->
        <section class="simple-filters">
            <div class="container">
                <div class="simple-filters__buttons" id="letteringFilters">
                    <button class="simple-filter-btn active" data-filter="all">All</button>
                    <button class="simple-filter-btn" data-filter="lettering">Lettering</button>
                    <button class="simple-filter-btn" data-filter="poster">Poster</button>
                    <button class="simple-filter-btn" data-filter="logo">Logo</button>
                    <button class="simple-filter-btn" data-filter="animation">Animation</button>
                    <button class="simple-filter-btn" data-filter="playfaces">Playfaces</button>
                </div>
            </div>
        </section>

        <!-- Lettering Grid Section -->
        <section class="lettering-grid-section">
            <div class="container">
                <div class="lettering-grid" id="letteringGrid">
                    <!-- Lettering projects will be loaded here by JavaScript -->
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer__content">
                <div class="footer__brand">
                    <h2 class="footer__title">The Loveprinting Machine</h2>
                    <p class="footer__subtitle">Type Foundry</p>
                </div>
                <div class="footer__nav">
                    <div class="footer__section">
                        <h3 class="footer__heading">Fonts</h3>
                        <ul class="footer__list">
                            <li><a href="../typeface/retiler.html">Retiler</a></li>
                            <li><a href="../typeface/retry-sans.html">Retry Sans</a></li>
                            <li><a href="../typeface/lanze.html">Lanze</a></li>
                            <li><a href="../typeface/puff.html">Puff</a></li>
                            <li><a href="../typeface/nytra-mono.html">Nytra Mono</a></li>
                        </ul>
                    </div>
                    <div class="footer__section">
                        <h3 class="footer__heading">Links</h3>
                        <ul class="footer__list">
                            <li><a href="#" target="_blank">Telegram</a></li>
                            <li><a href="#" target="_blank">Instagram</a></li>
                            <li><a href="#" target="_blank">Behance</a></li>
                            <li><a href="mailto:hello@example.com">E-mail</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop">↑</button>

    <!-- JavaScript -->
    <script src="../js/data-loader.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/filters.js"></script>
    
    <script>
        // Fix data-loader base path for pages in subdirectories
        if (window.dataLoader) {
            window.dataLoader.baseUrl = '../data/';
        }

        // Simple Button Filter Adapter for existing FiltersManager
        class SimpleButtonFilter {
            constructor() {
                this.currentFilter = 'all';
                this.data = [];
                this.init();
            }

            async init() {
                console.log('Initializing SimpleButtonFilter...');
                await this.loadData();
                this.bindEvents();
                this.render();
                console.log('SimpleButtonFilter initialized successfully');
            }

            async loadData() {
                try {
                    // Используем существующий data-loader
                    if (window.dataLoader) {
                        console.log('Loading lettering data from dataLoader...');
                        const letteringData = await window.dataLoader.getLettering();
                        this.data = letteringData.letterings || [];
                        console.log('Loaded lettering data:', this.data);
                    } else {
                        console.log('DataLoader not available, using fallback data');
                        // Fallback data если data-loader недоступен  
                        this.data = [
                            {
                                id: "lettering-1",
                                title: "Coffee House Logo",
                                type: "lettering",
                                category: "logo",
                                link: "https://dribbble.com/coffee-house-logo",
                                year: "2024"
                            },
                            {
                                id: "lettering-2",
                                title: "Festival Poster Typography",
                                type: "lettering", 
                                category: "poster",
                                link: "https://behance.net/festival-poster",
                                year: "2024"
                            },
                            {
                                id: "lettering-3",
                                title: "Mural Lettering Project",
                                type: "lettering",
                                category: "lettering", 
                                link: "#",
                                year: "2023"
                            }
                        ];
                    }
                } catch (error) {
                    console.error('Error loading lettering data:', error);
                }
            }

            bindEvents() {
                const filtersContainer = document.getElementById('letteringFilters');
                if (filtersContainer) {
                    filtersContainer.addEventListener('click', (e) => {
                        if (e.target.classList.contains('simple-filter-btn')) {
                            this.handleFilterClick(e.target);
                        }
                    });
                }
            }

            handleFilterClick(button) {
                // Remove active class from all buttons
                document.querySelectorAll('.simple-filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Add active class to clicked button
                button.classList.add('active');
                
                // Update current filter
                this.currentFilter = button.dataset.filter;
                
                // Re-render
                this.render();
            }

            getFilteredData() {
                if (this.currentFilter === 'all') {
                    return this.data;
                }
                
                return this.data.filter(item => item.category === this.currentFilter);
            }

            render() {
                console.log('Rendering lettering projects, current filter:', this.currentFilter);
                console.log('Available data:', this.data);
                
                const container = document.getElementById('letteringGrid');
                const parentContainer = container ? container.parentNode : null;
                
                if (!container || !parentContainer) {
                    console.error('Container not found');
                    return;
                }
                
                const filteredData = this.getFilteredData();
                console.log('Filtered data:', filteredData);
                
                // Clear container
                container.innerHTML = '';
                
                // Remove any existing no-results
                const existingNoResults = parentContainer.querySelector('.no-results');
                if (existingNoResults) {
                    existingNoResults.remove();
                }
                
                // Handle empty state
                if (filteredData.length === 0) {
                    console.log('No data to display');
                    this.showNoResults(parentContainer);
                    return;
                }
                
                // Render items
                console.log('Rendering', filteredData.length, 'items');
                filteredData.forEach(item => {
                    const card = this.createLetteringCard(item);
                    container.appendChild(card);
                });
            }

            createLetteringCard(item) {
                const card = document.createElement('div');
                card.className = 'lettering-card';
                
                card.innerHTML = `
                    <div class="lettering-card__image">
                        <div style="background: var(--color-gray-100); padding: var(--spacing-2xl); text-align: center; color: var(--color-gray-500); font-size: var(--size-sm);">
                            Lettering Project Image
                        </div>
                    </div>
                    <div class="lettering-card__info">
                        <div class="lettering-card__type">
                            Type:<br>
                            ${item.category}
                        </div>
                        <h3 class="lettering-card__title">${item.title}</h3>
                        <a href="${item.link}" class="lettering-card__link" target="_blank">
                            Link →
                        </a>
                    </div>
                `;
                
                return card;
            }

            showNoResults(container) {
                // Очистим контейнер перед добавлением no-results
                container.innerHTML = '';
                
                const noResults = document.createElement('div');
                noResults.className = 'no-results';
                noResults.innerHTML = `
                    <p class="no-results__message">No lettering projects found</p>
                    <button class="no-results__clear" onclick="letteringFilter.clearAllFilters()">
                        Clear all filters
                    </button>
                `;
                container.appendChild(noResults);
            }

            clearAllFilters() {
                this.currentFilter = 'all';
                
                // Reset active button
                document.querySelectorAll('.simple-filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.filter === 'all') {
                        btn.classList.add('active');
                    }
                });
                
                this.render();
            }
        }

        // Initialize back to top button
        function initBackToTop() {
            const backToTop = document.getElementById('backToTop');
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
            });
            
            backToTop.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // Initialize when DOM is loaded
        let letteringFilter;
        document.addEventListener('DOMContentLoaded', async () => {
            // Initialize simple button filter
            letteringFilter = new SimpleButtonFilter();
            
            // Initialize back to top
            initBackToTop();
        });
    </script>
</body>
</html>